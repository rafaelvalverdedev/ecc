<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <title>Ficha de Inscrição • ECC</title>
  <link rel="stylesheet" href="./css/estilos.css">
  <link rel="stylesheet" href="./css/loader.css">
</head>

<body>

  <h1>Ficha de Inscrição de Encontristas</h1>

  <div class="card">
    <form id="formInscricao">

      <!-- ===================== ETAPA 1 - ESPOSO ====================== -->
      <div class="step active" id="step1">
        <h2>Dados do Esposo</h2>

        <label>Nome Completo</label>
        <input required id="nome_completo_esposo">

        <label>Data de Nascimento</label>
        <input type="date" required id="data_nascimento_esposo">

        <label>Profissão</label>
        <input required id="profissao_esposo">

        <label>Como deseja ser chamado</label>
        <input required id="como_chamar_esposo">

        <label>Igreja</label>
        <input required id="igreja_esposo">

        <label>Celular</label>
        <input type="tel" required id="celular_esposo">

        <label>Religião</label>
        <select required id="religiao_esposo">
          <option value="" disabled selected>Selecione</option>
          <option value="catolico">Católico</option>
          <option value="evangelico">Evangélico</option>
          <option value="espirita">Espírita</option>
          <option value="outro">Outro</option>
          <option value="nenhuma">Nenhuma</option>
        </select>

        <label>Escolaridade</label>
        <select required id="escolaridade_esposo">
          <option value="" disabled selected>Selecione</option>
          <option value="fundamental">Fundamental</option>
          <option value="medio">Ensino Médio</option>
          <option value="superior">Ensino Superior</option>
        </select>

        <button type="button" onclick="nextStep()">Próximo</button>
      </div>

      <!-- ===================== ETAPA 2 - ESPOSA ====================== -->
      <div class="step" id="step2">
        <h2>Dados da Esposa</h2>

        <label>Nome Completo</label>
        <input required id="nome_completo_esposa">

        <label>Data de Nascimento</label>
        <input type="date" required id="data_nascimento_esposa">

        <label>Profissão</label>
        <input required id="profissao_esposa">

        <label>Como deseja ser chamada</label>
        <input required id="como_chamar_esposa">

        <label>Igreja</label>
        <input required id="igreja_esposa">

        <label>Celular</label>
        <input type="tel" required id="celular_esposa">

        <label>Religião</label>
        <select required id="religiao_esposa">
          <option value="" disabled selected>Selecione</option>
          <option value="catolico">Católico</option>
          <option value="evangelico">Evangélico</option>
          <option value="espirita">Espírita</option>
          <option value="outro">Outro</option>
          <option value="nenhuma">Nenhuma</option>
        </select>

        <label>Escolaridade</label>
        <select required id="escolaridade_esposa">
          <option value="" disabled selected>Selecione</option>
          <option value="fundamental">Fundamental</option>
          <option value="medio">Ensino Médio</option>
          <option value="superior">Ensino Superior</option>
        </select>

        <button type="button" onclick="prevStep()">Voltar</button>
        <button type="button" onclick="nextStep()">Próximo</button>
      </div>

      <!-- ===================== ETAPA 3 - CASAL ====================== -->
      <div class="step" id="step3">
        <h2>Dados do Casal</h2>

        <label>Endereço</label>
        <input required id="endereco">

        <label>Cidade</label>
        <input required id="cidade">

        <label>UF</label>
        <input required maxlength="2" id="uf">

        <label>Email</label>
        <input type="email" required id="email">

        <label>Telefone</label>
        <input type="tel" required id="telefone_principal">

        <label>Possui filhos?</label>
        <select required id="possui_filhos" onchange="toggleFilhos()">
          <option value="">---</option>
          <option value="false">Não</option>
          <option value="true">Sim</option>
        </select>

        <div id="dados_filhos" style="display:none">
          <label>Quantidade de filhos</label>
          <input type="number" min="1" id="quantidade_filhos">

          <label>Responsável pelos filhos</label>
          <input id="nome_responsavel_filhos">

          <label>Telefone do responsável</label>
          <input type="tel" id="telefone_responsavel">
        </div>

        <button type="button" onclick="prevStep()">Voltar</button>
        <button type="submit">Enviar</button>
      </div>
    </form>
  </div>

  <script>
    let currentStep = 1;

    function showStep(n) {
      document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
      document.getElementById('step' + n).classList.add('active');
    }

    function validarStep(stepId) {
      const step = document.getElementById(stepId);
      const fields = step.querySelectorAll('input, select');
      for (const f of fields) {
        if (!f.checkValidity()) {
          f.reportValidity();
          return false;
        }
      }
      return true;
    }

    function nextStep() {
      if (validarStep('step' + currentStep)) {
        currentStep++;
        showStep(currentStep);
      }
    }

    function prevStep() {
      currentStep--;
      showStep(currentStep);
    }

    function toggleFilhos() {
      const possui = document.getElementById('possui_filhos').value === 'true';
      const bloco = document.getElementById('dados_filhos');
      bloco.style.display = possui ? 'block' : 'none';

      bloco.querySelectorAll('input').forEach(i => i.required = possui);
    }

    // submit

    document.getElementById('formInscricao').addEventListener('submit', function (e) {
      e.preventDefault();
      if (!validarStep('step3')) return;
      alert('Formulário validado com sucesso. Pronto para enviar ao backend.');
    });
  </script>
</body>

</html>